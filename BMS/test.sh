RED='\033[0;31m';
BLUE='\033[0;34m';
NC=$'\e[0m';
GREEN=$'\e[0;32m';

echo "Encoder";
##########
##TEST 1##
##########
./bms -e -i 0,2,1 <<< 101 > tmp.file
out="111001101001001"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 1 -e -i 0,2,1:\t\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 1 -e -i 0,2,1:\t\t ${NC} ${file1} ${GREEN}OK${NC}";
fi

##########
##TEST 2##
##########
./bms -e -i 2,0,5,3,1,4 <<< 100111 > tmp.file
out="110001011110101101001001"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 2 -e -i 2,0,5,3,1,4:\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 2 -e -i 2,0,5,3,1,4:\t ${NC} ${file1} ${GREEN}OK${NC}";
fi

##########
##TEST 3##
##########
./bms -e -i 3,2,4,1,5,0 <<< 101010 > tmp.file
out="110001101001111000111000"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 3 -e -i 3,2,4,1,5,0:\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 3 -e -i 3,2,4,1,5,0:\t ${NC} ${file1} ${GREEN}OK${NC}";
fi


echo "Decoder";
##########
##TEST 1##
##########
./bms -d -i 0,2,1 <<< 0.8117286904216565,0.9329612586102796,0.466240262565775,-1.1806385220545133,-1.0073440029673555,1.167453729725047,1.0847824037646787,-1.3599551228550821,1.321380961799438,-1.2091285333721777,-0.22512460716740712,1.3137765324710164,-0.7200147467769947,-1.22179391781076,0.42425885852168255 > tmp.file

out="101"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 1 -d -i 0,2,1:\t\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 1 -d -i 0,2,1:\t\t ${NC} ${file1} ${GREEN}OK${NC}";
fi

##########
##TEST 2##
##########
./bms -d -i 2,0,5,3,1,4 <<< 1.2673732938260902,0.9062754598095913,-0.5261228717625472,-1.051000488090995,-1.358284600201495,0.9221731021029576,-0.6699131123010096,0.9710620196604015,1.4166806214480285,1.374065959795744,0.8578688067934579,-0.42160698533656127,0.6608855405460567,-0.6664646393834985,1.1900964714639715,1.5818003285495221,-0.9596056647905428,0.8789795198071529,-0.7684037932561387,-0.9074278707601757,1.0946931633674326,-0.5054514927378362,-1.2069294195212144,0.9812531858982751 > tmp.file

out="100111"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 2 -d -i 2,0,5,3,1,4:\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 2 -d -i 2,0,5,3,1,4:\t ${NC} ${file1} ${GREEN}OK${NC}";
fi

##########
##TEST 3##
##########
./bms -d -i 3,2,4,1,5,0 <<< 1.203522167996614,1.2524844599137366,-1.376652806781083,-1.1422068653345685,-1.2667189034281865,0.16532110596681504,0.8562109486407058,-0.5792181377441328,1.5974214750440114,-1.3827773350455494,-1.830617821365228,0.7301502025398654,0.3969880169063571,0.6840849405756638,0.8833811806506193,-0.8131391054538506,-0.8846224520962913,-1.0514103061775337,1.0024725376951729,0.8658803562335791,1.0612270495559868,-0.8835867176598403,-1.2462963652859267,-1.133735369328358 > tmp.file

out="101010"

if [ "$out" != "$(cat tmp.file)" ]; then
    echo -e "${BLUE}Test 3 -d -i 3,2,4,1,5,0:\t ${NC} ${file1} ${RED}BAD${NC}";
else
    echo -e "${BLUE}Test 3 -d -i 3,2,4,1,5,0:\t ${NC} ${file1} ${GREEN}OK${NC}";
fi

rm tmp.file